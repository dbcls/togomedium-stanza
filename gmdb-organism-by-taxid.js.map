{"version":3,"file":"gmdb-organism-by-taxid.js","sources":["../../../home/runner/work/togomedium-stanza/togomedium-stanza/stanzas/gmdb-organism-by-taxid/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.__TEST__ = void 0;\nconst get_data_1 = require(\"../../utils/get-data\");\nconst variables_1 = require(\"../../utils/variables\");\nconst stanza_1 = require(\"../../utils/stanza\");\nconst string_1 = require(\"../../utils/string\");\nasync function gmdbOrganismByTaxid(stanza, params) {\n    if (!params.tax_id) {\n        return;\n    }\n    const apiName = \"gmdb_organism_by_taxid\";\n    const result = await get_data_1.getData(`${variables_1.API_GROWTH_MEDIUM}${apiName}`, {\n        tax_id: params.tax_id,\n    });\n    const data = parseData(result);\n    stanza.render({\n        template: \"stanza.html.hbs\",\n        parameters: data,\n    });\n    stanza_1.importWebFontForTogoMedium(stanza);\n}\nexports.default = gmdbOrganismByTaxid;\nconst parseData = (data) => {\n    return makeSuccessData(data.body);\n};\nconst makeSuccessData = (body) => ({\n    taxid: body.taxid,\n    scientific_name: body.scientific_name,\n    authority_name: string_1.unescapeJsonString(body.authority_name),\n    lineage: body.lineage,\n    type_material: body.type_material,\n    other_type_material: parseOtherTypeMaterial(body.other_type_material),\n});\nconst parseOtherTypeMaterial = (data) => {\n    return data\n        .map((obj) => obj.name)\n        .reduce((a, b) => {\n        if (a.indexOf(b) < 0) {\n            a.push(b);\n        }\n        return a;\n    }, [])\n        .map((key) => ({\n        key,\n        labels: data.filter((item) => item.name === key).map((elm) => elm.label),\n    }));\n};\nexports.__TEST__ = { parseOtherTypeMaterial };\n//# sourceMappingURL=index.js.map"],"names":["stanza","get_data_1","variables_1","stanza_1","string_1"],"mappings":";;;;;;;AACA,MAAM,CAAC,cAAc,UAAU,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,mBAAmB,KAAK,CAAC,CAAC;AACyB;AACE;AACN;AACA;AAC/C,eAAe,mBAAmB,CAACA,QAAM,EAAE,MAAM,EAAE;AACnD,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AACxB,QAAQ,OAAO;AACf,KAAK;AACL,IAAI,MAAM,OAAO,GAAG,wBAAwB,CAAC;AAC7C,IAAI,MAAM,MAAM,GAAG,MAAMC,SAAU,CAAC,OAAO,CAAC,CAAC,EAAEC,SAAW,CAAC,iBAAiB,CAAC,EAAE,OAAO,CAAC,CAAC,EAAE;AAC1F,QAAQ,MAAM,EAAE,MAAM,CAAC,MAAM;AAC7B,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,IAAI,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;AACnC,IAAIF,QAAM,CAAC,MAAM,CAAC;AAClB,QAAQ,QAAQ,EAAE,iBAAiB;AACnC,QAAQ,UAAU,EAAE,IAAI;AACxB,KAAK,CAAC,CAAC;AACP,IAAIG,MAAQ,CAAC,0BAA0B,CAACH,QAAM,CAAC,CAAC;AAChD,CAAC;AACD,kBAAkB,mBAAmB,CAAC;AACtC,MAAM,SAAS,GAAG,CAAC,IAAI,KAAK;AAC5B,IAAI,OAAO,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACtC,CAAC,CAAC;AACF,MAAM,eAAe,GAAG,CAAC,IAAI,MAAM;AACnC,IAAI,KAAK,EAAE,IAAI,CAAC,KAAK;AACrB,IAAI,eAAe,EAAE,IAAI,CAAC,eAAe;AACzC,IAAI,cAAc,EAAEI,MAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,cAAc,CAAC;AACpE,IAAI,OAAO,EAAE,IAAI,CAAC,OAAO;AACzB,IAAI,aAAa,EAAE,IAAI,CAAC,aAAa;AACrC,IAAI,mBAAmB,EAAE,sBAAsB,CAAC,IAAI,CAAC,mBAAmB,CAAC;AACzE,CAAC,CAAC,CAAC;AACH,MAAM,sBAAsB,GAAG,CAAC,IAAI,KAAK;AACzC,IAAI,OAAO,IAAI;AACf,SAAS,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,IAAI,CAAC;AAC/B,SAAS,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK;AAC1B,QAAQ,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;AAC9B,YAAY,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACtB,SAAS;AACT,QAAQ,OAAO,CAAC,CAAC;AACjB,KAAK,EAAE,EAAE,CAAC;AACV,SAAS,GAAG,CAAC,CAAC,GAAG,MAAM;AACvB,QAAQ,GAAG;AACX,QAAQ,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC;AAChF,KAAK,CAAC,CAAC,CAAC;AACR,CAAC,CAAC;AACF,mBAAmB,EAAE,sBAAsB,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}