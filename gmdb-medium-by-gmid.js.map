{"version":3,"file":"gmdb-medium-by-gmid.js","sources":["../../../home/runner/work/togomedium-stanza/togomedium-stanza/stanzas/gmdb-medium-by-gmid/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst get_data_1 = require(\"../../utils/get-data\");\nconst variables_1 = require(\"../../utils/variables\");\nconst stanza_1 = require(\"../../utils/stanza\");\nasync function gmdbMediumByGmid(stanza, params) {\n    if (!params.gm_id) {\n        return;\n    }\n    const apiName = \"gmdb_medium_by_gmid\";\n    const result = await get_data_1.getData(`${variables_1.API_GROWTH_MEDIUM}${apiName}`, {\n        gm_id: params.gm_id,\n    });\n    const data = parseData(result);\n    console.log(data);\n    stanza.render({\n        template: \"stanza.html.hbs\",\n        parameters: data,\n    });\n    stanza_1.importWebFontForTogoMedium(stanza);\n}\nexports.default = gmdbMediumByGmid;\nconst parseData = (data) => {\n    return makeSuccessData(data.body);\n};\nconst makeSuccessData = (body) => {\n    const id = body.meta.gm.split(\"/\").pop();\n    const name = body.meta.name;\n    const src_label = getSrcLabel(body.meta.src_url);\n    const src_url = body.meta.src_url;\n    const components = [\n        ...processComponentTables(body.components),\n        ...processComponentComments(body.comments),\n    ].sort((a, b) => a.paragraph_index - b.paragraph_index);\n    return {\n        id,\n        name,\n        src_label,\n        src_url,\n        components,\n    };\n};\nconst processComponentTables = (tables) => {\n    return tables.map((table) => ({\n        ...table,\n        items: table.items.map((item) => {\n            var _a, _b;\n            return ({\n                ...item,\n                can_wrap_label: ((_a = item.label) === null || _a === void 0 ? void 0 : _a.length) >= 20,\n                can_wrap_name: ((_b = item.component_name) === null || _b === void 0 ? void 0 : _b.length) >= 20,\n                properties: item.properties.map((property) => ({\n                    ...property,\n                    displayLabel: getShortPropertyLabel(property.label),\n                })),\n            });\n        }),\n    }));\n};\nconst processComponentComments = (comments) => {\n    return comments.map((item) => ({\n        ...item,\n        comment: item.comment ? item.comment : \"&nbsp;\",\n    }));\n};\nfunction getShortPropertyLabel(str) {\n    const dic = {\n        \"Simple component\": \"Simple\",\n        \"Complex component\": \"Complex\",\n        \"Defined component\": \"Defined\",\n        \"Undefined component\": \"Undefined\",\n        \"Inorganic compound\": \"Inorganic\",\n        \"Organic compound\": \"Organic\",\n        Solution: \"Solution\",\n    };\n    if (!dic[str]) {\n        console.warn(\"no short property label found:\", str);\n    }\n    return dic[str] ? dic[str] : \"ERR\";\n}\nconst getSrcLabel = (str) => {\n    switch (true) {\n        case str.match(/jcm\\.riken/) !== null:\n            return \"JCM\";\n        case str.match(/nbrc\\.nite/) !== null:\n            return \"NBRC\";\n        case str.match(/dsmz\\.de/) !== null:\n            return \"DSMZ\";\n        case str.match(/atcc\\.org/) !== null:\n            return \"ATCC\";\n        default:\n            return \"SRC\";\n    }\n};\n//# sourceMappingURL=index.js.map"],"names":["stanza","get_data_1","variables_1","stanza_1"],"mappings":"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"}